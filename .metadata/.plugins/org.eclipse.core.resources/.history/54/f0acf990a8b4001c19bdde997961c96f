/*
 * API_uart.c
 *
 *  Created on: Apr 4, 2022
 *      Author: Lucas
 */

#include "API_uart.h"

static UART_HandleTypeDef myUARTHandler;

static void UART_Error_Handler(void);

bool_t uartinit(void)
{
	bool_t UART_Init_OK = true;

	myUARTHandler.Instance			= USART1;
	myUARTHandler.Init.BaudRate		= 9600;
	myUARTHandler.Init.WordLength	= UART_WORDLENGTH_8B;
	myUARTHandler.Init.StopBits		= UART_STOPBITS_1;
	myUARTHandler.Init.Parity		= UART_PARITY_ODD;
	myUARTHandler.Init.HwFlowCtl	= UART_HWCONTROL_NONE;
	myUARTHandler.Init.Mode			= UART_MODE_TX_RX;
	myUARTHandler.Init.OverSampling	= UART_OVERSAMPLING_16;

	if(HAL_UART_Init(&myUARTHandler) != HAL_OK)
	{
		// Initialization Error
		UART_Error_Handler();
		UART_Init_OK = false;
	}

	return UART_Init_OK;
}

void uartsendString(uint8_t * pstring)
{
	//HAL_UART_Transmit(&myUARTHandler, pstring, strlen(pstring), 10);
}

void uartSendStringSize(uint8_t * pstring, uint16_t size)
{
	HAL_UART_Transmit(&myUARTHandler, pstring, size, 10);
}

void uartReceiveStringSize(uint8_t * pstring, uint16_t size)
{
	HAL_UART_Receive(&myUARTHandler, pstring, size, 10);


}

static void UART_Error_Handler(void)
{

}

